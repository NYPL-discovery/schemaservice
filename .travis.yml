language:
- php
- node_js
install: npm install
cache:
  directories:
  - node_modules
before_deploy:
- echo "All unit tests passed; Preparing to deploy $TRAVIS_BRANCH"
php:
- 7.1
script:
- composer update
after_success:
- ENVIRONMENT_NAME=$TRAVIS_BRANCH
- if [ "$TRAVIS_BRANCH" == "master" ]; then ENVIRONMENT_NAME=production; fi
deploy:
- provider: script
  skip_cleanup: true
  script: "./scripts/travis-deploy.sh $ENVIRONMENT_NAME"
  on:
    all_branches: true
    condition: "$ENVIRONMENT_NAME =~ ^(development|qa|production)$"
after_deploy: echo "Successfully executed deploy trigger for $TRAVIS_BRANCH"
env:
  global:
  - secure: P/QuRG++9SzvC7TMuYxUh39szcIIlDDllpDJEMW66WLk7ryAiW8nlpa8uVK2yXcyuHB6XHoZEhC7nUhFyXrkQX4QlTBwqcRQV+gIYoPGUnt7KlBz/UTO5qyds3zIeiheFfivpmXzNhkpaL3wDIIQdym+Bnpy2VROf0wprxB4ITja0Pnh1n24xqJL16DrH/dq+4ay+7VzCXFZaFtlPng4kiN5vw1TIVtGdqlm/NDhLOKG3icmhLRq0up3ZhiV1ZqTo1nfdWPOK2SpTuuBnuLk31HuTQbjVWAAuDkuhBnCXBQFHxWNQPWJXFf2pHurgvmfoEUsVNmmBeBeypHkqezHXZ+HVxBWO0yZ7M1LGol0K4tTEhptF8XbNV+OU1VnFpw4ODxBXGkUNsZrk8WZnvfggE5pC3g7Gb02+cKFawabIuPpZTtZ+k2LkRP3Kd9BDRczkeP/PHYTwo+VoEEmOO/ZxDjOHOQgEGoPlETGKySGC/JXz2pbJZpf/BTSZft7MC+ERAGBwHfnGLvdGOlbg/9UrVNZXzZaxDGaUfyodBfjIBj69RrWTce8g3CTryREY7NzYgT0NfCb2U2jEHGbOzLGJLiUV6oEFzFFSYieIuXUztVvcXEJ30NWPOK9YlyqX4rEn7Et6MDK5Kmoh2xJEvTdaJFO1FmCN+bbmYKytgzXZx4=
  - secure: BSoemh0tMEoDuEKuPn4gagvlFB5TnFGANLBqrD6htVP9p+4jrXQiWbFf2yra49EsoJ4ye/hLUfupuVCBVuwgOgQpv4aQvPZGXLThdaP+NQEBIfmDJATuQ8pNPfOhhfjxHZZTFyKVbdopRlivEiNvMono8u6ENdHjVsPWT7FC+8AbKMTqu0zfTMJUVF8jKOjOD/3o6RyQt0+BzQ2oGG8SxcGTRcOgw5Mf+veV0GoFzTX4rAme4mBOII1sdcGC+NylNpBx9WV9V5Nv1/+8VNALXu6k2bJoM5zTVSrZcQF/f9QQiXDU6yaRjzLkVVpRB8+KVw2ZKR9sz3vBpAslDSJobh0AxTTgM6Dl5XCxwhF5L0qJAQ0mLwj69Sx1ZpC15JMBoGNiyNIi64cAyXw+3lgcKOlBinpP6CsIhGXSYghaEMUZ8Gafqx/NYafau5OjxyresRM1uNFttKtVIshqPn+TlFHXcSqd67KYIONsa0a6pxXlHRHOgMhc1aQ/1gcm+77W5o4u4nA1Lc6jgRFK8oxGQWhluWS/bXCOoJg7NtINR5E8tSOVBWmuP5puT6aIpHfKLHpTn3mZ1KVDms7fGVnFGaZd9j2O85TLeL4gTkvoFVQ/8d/2ujxHxyDM8k//RNOc+APTcttI0lC7GbRVvH5yZa6cpy5tmIaSaV6V8k5WCNM=
  - secure: d1bASPXKymEHqVpVYAH0u2lB+4EG8SH6YXcYOyFsLfhvXD53SoGuZRdsUfa17AKftZLpM3YViPCPVNWG0Q4mNkGsfcRqOv3+SpESpLYBujQ701N+QFPfz3U9LlRJUc695zrCalSAEVgccF+HL3GdaiGXaLFZgtryME5Xl3qoM1/lUXkxMmCrV0Re3X2W1sciJ/wtfBy+JjWG5332QhcyqgDS8rJ/N64MFVPMfZ/LrOdS74nd4njSl3n3WADlNfU4/SHuPTFbVu1fVogOHSNnizXsdW1SSk2LvHVMYGopn7fn8TJdpvjNsvBR57RM5h9JNuRweDpiBIEcU7lzkX+X7PulULHq7X2wwWyb6pu/HW5sPfQ3Qrnz6HsqJ5329GRXhTFXvGmf4kpgy66/6ak33f9aK6jZtnTtJwVDuXccVsXpaRoF42c7KpeyQE4uYzrwdMuxQK/cscUSxLJqkkAI4J46uro6Vr/5WkvkDRdIN+iz6ZutM9Mr8zfVrzlHlbUW5EF1uGMBrUgO8OPLdO/OWbrh85S2ePV1EzJ1ArrzULebxgagAO1jGM9hFLEB6A/T/Gw04Q1Vxtr7jhXsIUkmWgQTUOlG/uxiZ8E22Efbmyl7ncK+z0z0MBzCfIKcL6BP949ufJvDQcwLxIDH8ZdiNb6ymzLyjnYwZ06C+qcIPko=
