language:
- php
- node_js
install: npm install
cache:
  directories:
  - node_modules
before_deploy:
- echo "All unit tests passed; Preparing to deploy $TRAVIS_BRANCH"
php:
- 7.1
script:
- composer update
after_success:
- ENVIRONMENT_NAME=$TRAVIS_BRANCH
- if [ "$TRAVIS_BRANCH" == "master" ]; then ENVIRONMENT_NAME=production; fi
deploy:
- provider: script
  skip_cleanup: true
  script: "./scripts/travis-deploy.sh $ENVIRONMENT_NAME"
  on:
    all_branches: true
    condition: "$ENVIRONMENT_NAME =~ ^development|qa|production$"
after_deploy: echo "Successfully executed deploy trigger for $TRAVIS_BRANCH"
env:
  global:
  - secure: AuRRsmcTgQb9x9g+tnk+CZABRoDPykHHtReoA39lUGwrMEAb+2vnt3imvJrwULj/KY4ZLqmhSJ8wvj1TY4pGyA0xPyWzOUuL2KMakZJWPFWOg6BPpicpLqV/2VLPbZ4bvomZGkzbigP9BgNdgr30pjq5tVLNnSCCtcs402BQzN8Rcrl2hUODWHD4vMkMtQk1r8377Z38AOfuKfbkyOcGpikm9dvJNIW+jVYNwuLnZXetljyckq8/ZycqS6+i1zx67EDl7bZnPS1RR9WEhRRk3NFVJbzjJupO9U/qC2nAPCSDS7KHzHJobzq02qbChURNoPVV0QDe0ZDPiKn9ep5rDILRg8t33TzERcvt0U9IFKMMNW1+k9SauVoLJ+EvfkIrLaAO7e0mHGDI8RU/8dKj2Hkxv5hQnGjHcp9LUYZvZuPDFsRugvppX/bY+IJQNRqpWEW+XsJr7BER0hMfpVa8OAHtMF4n53/RfPlnS/jT3i+wbsF9Y91ArNUnBFj/MZmMg9mgRoIq7Cq0+3TnKE06YJ4CwWk8XUzYlcza9UIZTu0Iep13FKJQON3hvopAg+WNNznHN75jeRrRxPhBIIwEeLeRPyY/gBzL+w3JT4vfxfGjLZ3jiH+Y6XGFNc222Dcy15anHzEICPwpcIIzd/ktSXHrX3dcdjPRhqMq1aIAMNU=
  - secure: Ienq1j7RAvoUwsyTD6HesXcekqPRw2ZEYAgAW51wRy0phvQ6XoibGAbeEWr+fCJRyA/WRcv3yzr01cRJoM3MCPj8p21bi/2nCrzManRTqlx9ipM00ujTZuK9rIkLV9gs8i3FOV98xaozUgbXMaVvfhL2e5J6wT0DagxGIdlec4kx3m62MeWMoOgVzHbUIc59i+EQO6nYSCzj3qpnsP0uY7eKxxMrfTk9qtHGpueHigA9rRmiTDkvMkhc0eu4e8cWF+4yg994uRqtv24HyvRyh7/ZOg9k1zbtwqDGoLaLpxSNeJbzygAeSYGA6xi4P6dnzcGJUB/QJH0KN78X3Mrzv74+irFdlKSGRN+oHPgeMCAXNMaTLGiqT+cMiRGt8/u0pE9q0YCRTu1VER0ghSP1gU0Tk/jQXEi2AeG1rPSUBt8Rl/N28/P4C4coGQwboL6BY0SbFLDuKMiYPbvzLLcpBL0rOMQlwXCM/1w+IMaGIv+ElEDckjXi4Jd2+VhV1qAAAw+yN2TaoT0CoL9FPZHIjTAaR+eOWKghvmzUJXNtYUEDAMm6WO06hFq70XNFbFDJxhLAHEjzavCamfUYnGh7vtbOwNQxGwb4d3Vz60iQxvphfmRpi4IdjKWzJKuVBny65/bmXLrmIxDvsJQlcbkBY/+uH6xw2mETbG1mabz+oF4=
  - secure: adB+ZBUamuk+RMdTSWqTejo4ruKE66OsOUfqTZRNrYBsyizEA3tikIGxpPBp/GsS6W8CZ+71KLAc3ebDy/KFj6uHl4p3u0txNkmm709UNmk4fM/VZquCBpzKvyWCRsLwfCVBSH8AB+Z+C5G83dLRypG+7Bggxuob0eGFrL3UzYSzjfpQkucATOMSyH/9/NkCyhFuB8niNF/9VLHmn8Zd7Gz8iLHqw3cdWsg6McF4K/6xpU9OXBGUt6hGv7li0X3YmGFiWHg0T5nZTRmVDoRT3HLtNSvmvJxj5QHvp6kgQCUs1QvVrkPXVpgS3JQk6LAWiQS5+HVQZ+wfw/Yba/svySnmH/oofFiyysUGrctiqgc8IWOdNYFXA7hsOXUDMSbGVHl+rrH/cqQu5pxKWd25NhQ5Qri7IEYHPLoggpeDx9UtGPPOeedithLLmggxYVktA2ALEuRwpWwIQhoMO7DTBCTKlwBWldQwi9X6+07m+t3QabHku0FyTby8BHCzgsEmAD+v1RVUVLZgBpbnfBUl+/hQmatRcupI6X8XaLOHqCXNNhB4y+HX/GMgTHYQsL7G9rwT6r3OfxD4WMhSYkZhpPoF2ku/W33X5sw5XGHMRN3FDS0g2A+Q2OoUXg2xEPBkvPXOZH9jaVqExcrT8qE2lu6AX9Oloj+jwSPvhfSQlwk=
