language:
- php
- node_js
install: npm install
cache:
  directories:
  - node_modules
before_deploy:
- echo "All unit tests passed; Preparing to deploy $TRAVIS_BRANCH"
php:
- 7.1
script:
- composer update
after_success:
- ENVIRONMENT_NAME=$TRAVIS_BRANCH
- if [ "$TRAVIS_BRANCH" == "master" ]; then ENVIRONMENT_NAME=production; fi
deploy:
- provider: script
  skip_cleanup: true
  script: "./scripts/travis-deploy.sh $ENVIRONMENT_NAME"
  on:
    all_branches: true
    condition: "$ENVIRONMENT_NAME =~ ^(development|qa|production)$"
after_deploy: echo "Successfully executed deploy trigger for $TRAVIS_BRANCH"
env:
  global:
  - secure: "ehhusskFqWdmDNrhlp8mEM8VBb46UvwVZznTi9OkZ61jaiN79hM+2PuWwpDRt3uK9zRV4v/+PcydX4Bb4InGgwm6l2YBtFVeIEzZsaM/6SFzmfba3MZ7bhUpOMrYWaceSve18kfqb8Q6u0dybINorWi4ziVD9HrjmP3poAHHvVuVj968hEsvBXmF5AIXlqM88bkAfQBpZSkVpHyNlmjthXTJvU3yX/4d0UbQHFSIsvWsk920BMT7UQhZjBT56+Uj/QB6OlilRfRX/QplOeaaUT2gz5mYg8SmhvWK+/t+qdnuutfHp4SAo7rQHJ72n/GNuv8pG3OhJpy4ZZofSejytCgWcy5dTgVsxW8/x7rB9T0mzH0oCnz05G+LE/m+v3ZX6+lPl7tHnSWjzTEc7TJ+7VdnoG+kWzYRiE9QgYjRgp1pYrv9yOZqJUrqBR0SKc4Byx4/KHbHGMkctvHzp1o2mejZCwCkzOa8dvmOccsd6xSuvpA+RX1uUBbMKlOX67iCVBxUsjkExz+RVXHwaKuGNlYpYihMHIeHbVCDSbFZCGjgCyap0NDPNhyO8BQTrEi82lsknJ6F14KOsutVfVfhmY2qNc0zUjw/kSc7IURNigzitDRzByW5HqOdxbpCAbpoedArJgK/63Hb7C6pkdmF/auC9y9Wmhp2Vo3/+CpxjaQ="
  - secure: "Oy5aa/YnMgyTYfjCwVo7Y6i0Zwpb7IrBrhac5CC7rSTXsSkyK++QwlgxZFRq5sGridKqQPvMAjfo2OMBPrXxjNo1CzsyuALC5CBRhiGYXFHIObjsuh/WP+91gWFs4sncPiO8qiwRK/0oEVvLrI9Wj/6+bFSrM878RyvjuhPZyfOUW/t1HsPF9yPh2f4P+RIu4Pfhsbk7VEGO3ULE0ZZbssQpZfqSnHStMG3CKCmjsJRyAuID6upGH8VFhwDqUMeDChRW6eAW85+Vc0Z8tReywQYQeZcwIv6zC8kSO/n3AoPGRPyv2PSLINJqyusXsaOHfoq0+989VNkwWsYNQ97CwZiKbmHQ5grjKYN24PB2OE6GmK/PSUJR8jVHEaAgsLTK2lqFWRBmUoj1HpuN8iDzcHQ/uSdIv9kVsnE+5z3FndrMTGMSuDdbk01qJI/KHepsCd/CJWoiyK2/vLK1rcu1KTIkYbtNWucHbchUY63H527Vq5UkwW+Q5vToJeXs6626YaG4edw01AsEt3mQmNy4q5KGT8oaXrbjxY77WvKL4crOdjxuuwf96qEybHfwmaZRJLbX0Od6QBiq0fpIoWmPecrB6Brdvx3Q3ZBYoyy6Lqoq/J1nr5fgbHtEKonjEdA4jmFdzdI/BY1Xz4KsoOZNhNKw0CtC+7TI7yajRG2LF0Q="
  - secure: "R3junnvVBNPs+QF6S2lZxi8yUXgTvqXt3htZCS7Bem2Biam2b5nmfyZd4Qgq/111b3hkhQJLdUiCz6xw1z53pjRvpPrJY1Fr3UOpE1HH1o+RNw87GHiG/LOfM265j3MP063vZ8HGLneS7A/QMT2AjzYPRKqJDZyhTGGzoVCuVUDcr1iYoNzi3L4bB1FIErGx1OR7kCSkFgnOt5W4vkuegsfqoUrTTog1QFJmPOCHxJTmrIkSd+s51mLuB0IsEePGXHd0hNUirSaD0w5pvrXoCGftAP7yq7E3+PXage0JL4RZzVa9IzGwSGattrz6yaSOC1sMtbQcR8FMT5bDhsrT/vNkv6Up8r0PythZtmPgI7hkyDcgqDpqMXZRQHvfASUsjc8LbVuhDp9WTRsOTdIR6Kk7CZKT460hBVgB33uRlwMkDTL2vTZrZ8mJmeKKBabHVeZuvpmkpRQMQvdwFLXmP5/tGLQSK6HiOXpzyJrQvNZkDM3icZwBwVQFXmgloZVAcEeXBjDE8+hBHTtkgNE2bAIkD+J4EwkYOYpkil9RHEOVv1chcWWJTL6K/1efJSkyz9e1SghQPeAYpkZ58gxYXvZxdFbwmZ7qmlPF+yuX3oTL8BVKQPji73znHMEoea8bGnuz/qz0cR9n73MMxp9N4cKbPvmzgxgJ9w4KG23nzAI="
