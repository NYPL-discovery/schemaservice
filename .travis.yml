language:
- php
- node_js
install: npm install
cache:
  directories:
  - node_modules
before_deploy:
- echo "All unit tests passed; Preparing to deploy $TRAVIS_BRANCH"
php:
- 7.1
script:
- composer update
after_success:
- ENVIRONMENT_NAME=$TRAVIS_BRANCH
- if [ "$TRAVIS_BRANCH" == "master" ]; then ENVIRONMENT_NAME=production; fi
deploy:
- provider: script
  skip_cleanup: true
  script: "./scripts/travis-deploy.sh $ENVIRONMENT_NAME"
  on:
    all_branches: true
    condition: "$ENVIRONMENT_NAME =~ ^development|qa|production$"
after_deploy: echo "Successfully executed deploy trigger for $TRAVIS_BRANCH"
env:
  global:
  - secure: zZANlxcX0pPRP5anZmc1sga5jm9kP26kOSAF95j7bo+evaT7GPOJtr2eUgv39LUWnvlRw+jtGdUTdffHsiqJjb/pY1at+1fOkIuWCOI3yr+TjrfSLtnEyyz6kz4+OwEvuaoL31+7LKr/zhE8OWuImVXxhv9hZ7KJaVETambznb8ljsyt5Gh7uVS/bXQONJR6uKKW6B5JEEcQIpr2ZFE3Z/Xh0qUGL+oXI6md9VdoDz27dIwLo6GAu3E1LQCOxP8OlegVR/EMrSXwWZ6ucy7VMnZ2fVQ2Pi+E7PJ+MRsVyjS36vm8IRKMODisV1j/a2HUvUEiDWC9Xejz6Ub+HnihED4TMKQKO2RBKf/mt59/TjBJfHmsn/upV1zQuvhqB8KfMrb0tGG2vKZdi7B2EfCA5lt0IrjKGErJKjWpjkH6wLqMpAI0m74vrgg72hGtmvrzrehoAEi3UzAzEgfHLF3nhNPZS0Mns7EqW6LwQOQO7veL2HHztZFkDF0cgjsk2U6LpjgccG5xcg+/7JlST8YXyA17DWVy/4SQPHMsSTtKpb8x7lGxWzwFnbV6tw0RUldIj3UeuhqTdPaqIG5Gig2IMINm+/TmF12xfYiHG1QDFZ3ikvV0sgMqnWaOgF0jxE/P+LnfOnyTe+hZqY0F2KtUPdF6qs96a/pZ+eeAToRMgQo=
  - secure: VrhNeWLZ0DVPa1KuLzTCVZUl95UM3iIj4P2atsZtK51G/JjaNd2FG+RnlexA2m6hg3lZPz/dsS7JqHkIYT2o3eQhXzbZJhtNWEHXVw0C9OoxVuIZKVKZhA5Tw7a3KH3SjcA+pGJnAcEqmR0eMjxuepLXK9HJBFKQEvB/0egjC5xmBLU+k5YYRVLXB1P7zvBNKlrS+LttBZXFk3YTiVEjwypCezsZvd47jQC7OwPqS/fE6iFdASJEjW6wyeSzAknweLYNK4l4BE7m8QqTgd9Gpqo6mvuEdUNo2uAYOZY1Thdo4YhHdNKyN1aDvqZzFxax+nMitQJI0gRfNqFqyn6mNVV0DLXePksMpNn8Lqb/xW4PUDSkGDK+6tp9S2oIOv7RKuSOUj2RRLgHkGjlu/n9LRgNZBuvSAULClppD+bN0tmQcilcZe6v47QOsh6Mv26H8IjjTuymJ3SxOloZ6rbWEbfpNfrpUc700atUKTIxihJOpSEWQ2jJQKxt88HxTv76D1r0+U/yTbFgnftdcPlh+N6/5K8uN94XuTpeAegss9g/qVt0dUmuxPSL5gghkgwv4WxcEXi0K4yO6CGF14lWVcjfBldTJITloen5AViO9m5ywA/mXCgUksM0be1cOjQAoLwr2Oif99hQ4bMfqDHep4wrqGW8nrASjOfCkAX9AcQ=
  - secure: WvM19/iZXJv4JXQxUQ/JCjXy/Buk4GIBHuMlBBmmFOV3pYOUrn2w1XYFO/CbWqAXPikXlx99+2J4bspxvPiyGwII+yyA0ma2gNBtkhq5eHPHfTq+RfKbo0YyV7DrBtISPUkCHFkmI0+2IHg6cCCGnIeWF0JH7rvkX3cptrRBdG6K8x2MDtk14WUuVAwZoDWChMlw7KuJ/v3q+Nic3NmRIxkhaZQ/aawaaZAGDYCEkueORK1pO7B9x/T93qp2v2BPIQj4BJGYTtHAr//US2Ay2i54iqmXKtjCpdyXT7oryK42CQ9Rya0V5J/XWJ8GwntYtR6g3l+mflbtXJUPMkBZuyavcM77RHEGcO3MvfUMPR1DZHFx8e0ONIfCFEeHMxSxzQ/ABeO6EGWuSW6JevFMpBggLOG9bM7xo+Gck2NAO36MYEwGNbNt3V/Ihyv3s0GCWLvugZRl0wT/8fOKmttoW1nXh8Ii0/dy68EmhiDebWfcq2LP2j4wyuC9oyCNFYKcHWENcpzyq5ICeaMepvgva0peEd/2w3iUy75BA2Wlf3R4yGLTY7s1DVVgeGTtE1nAqnxHrn1isrhrRHBEXSez/R8kjqyRVgGu5t4bMZAF/dl4pTB0Wvd6JNmcKB8zNAX8xAP4iBRbtuqRan1nxbke65EsazLHIJazxet0Dalh7oo=
