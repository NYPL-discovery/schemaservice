language:
- php
- node_js
install: npm install
cache:
  directories:
  - node_modules
before_deploy:
- echo "All unit tests passed; Preparing to deploy $TRAVIS_BRANCH"
php:
- 7.1
script:
- composer update
after_success:
- ENVIRONMENT_NAME=$TRAVIS_BRANCH
- if [ "$TRAVIS_BRANCH" == "master" ]; then ENVIRONMENT_NAME=production; fi
deploy:
- provider: script
  skip_cleanup: true
  script: "./scripts/travis-deploy.sh $ENVIRONMENT_NAME"
  on:
    all_branches: true
    condition: "$ENVIRONMENT_NAME =~ ^(development|qa|production)$"
after_deploy: echo "Successfully executed deploy trigger for $TRAVIS_BRANCH"
env:
  global:
  - secure: Fqbj9+xpvnkq0O+dBhy0wW5FRrZZojd/WipV8OAff4UuxW/uwquPkOzXmkNHWWbc8uOqGXJZ27n1/Yt0BcplKqPM+PeqHgYi6EgUp5SGf+dxeLFfmDki3n93t5GOXSmtCSIULO9AAI0Sie94lfUOwvlRo1V93d/Wfb3kY648Mifc43ss5vZPcM000ttINatf/vcj2dj24bhHafH+oPWcgPJUkapEfGAdZbEa3r7JPb3fqA5vTPmyKj25cxCzWijS/V1cLkWFldDCqUJ0z2MCLIXYrrgTs18hPijcnV36HJEX+h+j+MVmTRkDxGc4XeeTooUIV+uXtzB+zqObrdrsMqy2YxVzPORIw0p27MXulc4nmGRkG77iFTas4MvGi5PweaHRsXU6oTnRbsZJ0lWqj/rHdmBF3gaaoTIVoag3rG9uxdiSI3hFFBTLqXnB224cHepYuM2CuAYUpCAz/cERgYrMg8pyT3+mVpZ99tP7J2I2oDDvIehmVdF3sjgWY0oT01e5gVx8K1/hKd8YRFbDp5JuM0C2y9+Y7GagW3YZlOzK9oU/eFD/BvW1Knjce4COc7PKp6NOldYmKjgISKy3ji6Qv10Jetx1MO2ADAr5tsJc+JBNQKZXQdEu5Gm+/F4vAX8JZLADrto7qBxF/oTaK543xSLxxk8a0uauvmiHZXk=
  - secure: lWp9sdpQQO5L9Xf/9RTj+cc9qAQ4qjUByrVRbWZ7GYcpeC8TeDee05PVFiFHKCcccRGjGGH3jrLsK59dA92hHbDRarbUn5q+LKLjKYUomVVyw7a7VCh1OmOsf7oJwLqO7PdtFvXIeq5DBEl/sPVHDxogebBBRRk3YbDn4Otha9RHHG78861Oplf01eadmpXO5gSxhWYgmMq71SAjSLCW0f8JGNVmb9IzbamG3K5BtC2mVaOTle3oB5/SD+nFtqS+qt4hlJM0pirig+9lMKhHiQz9/aoyHBtzZeTVZXk6/D6u7v9p0xX8cTwMQ0D1oOflWvLxK7YTGlFF82F1kaow7IyuJNpTUn4kbO1CKDrzQSGdDionjBeR/VjerU02/e3pz6Z/IF7e/Jgwf2qHxtnp1pO8baeZPXHJxVBB5agVQPWLzy0PwSdlkywwI/6c7nWYcJUG5XlNnNsLq3Fn3y+qTOaWmkW8cxsxzjPBB4z+ODH0wBfBm79i2CPaz9cqB+4V7+e3QkpocYAf5x1Lk/Nt4GZJbMxyzQkpCuv9nBepy73oMLp/bzfwFea1bWcOhHeKfy+4GD3HPada6hYalI/Ri6PlZ2qg1YiuAqqGBNLrmjrJ75TXZSd30JjyMBNFvVJeAQtsE9gS0mxEvZ+Q7IBQuKpboiV4DlqUMfFxUeR0SAE=
  - secure: iJbcodfnB4/t3pY6q3g44Yi7NTr5uM8/6Im/SJH1vbf294AcCsJl2uP2ipCnzG6xorIWs4sKJKpfmvfg6hACC7+cSk3rhBEstmz7cvlLvpRBM1pM6QTvild5iY3IfzwmQEOALo6aIChs4xf8QlO20yYaNrm2sUuzrQfiqsX9sgeU5bCwP5xLd6i7sB+HM1kbvYNC1gBqcULuvjKcLxjLWtB+E0gxxOo/6RFG5kvZvobuSv0CDH4KY8xiJD1RWhYlWqiKSuYfbdtvqCrvd3TMQVTt83Rg/ywgJL7ocjIgCJP2toLoaf7He+IYDR74HUzV0yHBn8H1fPQFhGyG46pBjND9AL20C02XhLWiVpbU6VijJRFamc62y4j9x4aM9A0d3Qo/nX9Kjjkissn2XlL4JKP5dpgSrj8TZ6ebxM1mhalbwyiLob//iIY4frL0cJwexin0ipBQHO1uw3I7yzjUBMpa/Lb2T8md4qn11dJj1IMr4LOlmCqQal3SOkSquWLQE7+kXvclFciQa6chIJdJ6sMt+A7IhQykcLdaRiHCmXPKagPojEJGTrnjvml52AEXSXNI8/efGdOFhlvgwmvMM1vqHpJCy7D+Yf2Vp0YpLirTQqWzhJS+zAKwNTn/rHYbAyTIovpOf/oiogsYYgbTKl7YtNXuI2pI7C/YFaWYX4Y=
