language:
- php
- node_js
install: npm install
cache:
  directories:
  - node_modules
before_deploy:
- echo "All unit tests passed; Preparing to deploy $TRAVIS_BRANCH"
php:
- 7.1
script:
- composer update
after_success:
- ENVIRONMENT_NAME=$TRAVIS_BRANCH
- if [ "$TRAVIS_BRANCH" == "master" ]; then ENVIRONMENT_NAME=production; fi
deploy:
- provider: script
  skip_cleanup: true
  script: "./scripts/travis-deploy.sh $ENVIRONMENT_NAME"
  on:
    all_branches: true
    condition: "$ENVIRONMENT_NAME =~ ^(development|qa|production)$"
after_deploy: echo "Successfully executed deploy trigger for $TRAVIS_BRANCH"
env:
  global:
  - secure: UA0aMyxUseGcnWbaECAkjUnzXorLkFO9nb/kLYgfqnBt6E6ZukICmivtAVpQVt5KHOP57Mtpknc2IySju7d71shgtjXaRS4Sxu3tFMFgHMAnDkX21DyKbLC/JR08uUb8QQ8rce7GuF7iN3lRAuHIdbZAqg/KSrmE9bSb0NGVOIOOlRgCED3nXbHdpnZjB8YTKWorr1CaTuTqWFYLQr9S2WG+w+GwqjCoKaL5pB2vkPVLbQq0hOy5h+/r/YU5oiJyP0eEEuzcFJg3vjRp7UIpIc7Ym8IZNVzZ9VAd54uAKpJ0XRLLh68fw8Ujm3KqknFUGzgyoKZPNM4FzAX08PHTQLRgYxfCe1pjgiL409eVaGs1KaXSzDr8xz2DdjsEG+GEfOyJlTfVZdqDSPGMdte7RUC/07N6lLmhMsZyvx3pwSptfifIphu9wXRpxntIGTHxa5AoXYSAf7MSZ6/M4dkoL9aEtBwwpvxzCPSc8XXRZ4K5CGbHgLy1a4sIpL4DD+xwaUamYgfGYwxgJXtIFYfsele57qPNcQAaY2qouc8cRzeJUk3TUfHQ8ikfNZdALWu+P3v0Vt5zhYPChqYMt9H5TYraVdyv3T6zgoUbBulfDVqzMlKEfmQhIpGRGJ/+rz/WULpgvLZGVorEgBCCXC2g2dXA8hHojtFCCgouJt2vgqg=
  - secure: mUXqDu5J9RbSXqOuY17hSyHWg2TS22cWCDuhiWOULoUS47HliIn7vzeqlNBxERDj/fJ1g66A54wGsgWHfj3ZTIacHHNlbjAUgLtRUcYvQukFFvwNTudG3tQjY7fMpi1EdSbr/xomQe3eIxnKQLhOMwolQR/0v3IW7PvCCJUlCs0YUyeu6mejpvWUlWlX6sBWnOMXK9DuvIH1lfko7FYHLCFEIAd5D9uTDmCYk21nN7VBf/0E1V/LBq5yvtd4woxpkdh1WjzhGr554wU00a28EMPNlnKr+JNPkHSggyCLMw6LGyxuDmIbn4VvunGXdYXy7clSG2nbNLn/8CdTf1dAXGvZJyLHz+y0Idb8Cxk3ESxaPnqAqT5Unill8bI9JKnrl6E6Qvopd83j70VSnm3t/aJj8NGx0OOeCRa8uaLV9RvzkKDiBunjJwSPGV3gAfejdlqn3Pa6MTi+r07EhSLphGsyqQ5lFUSYX5T7UYUdcIItlLOWGuXac2Rfb3K3ypC3wB9M4ZoZ8CxGqiXeYg6z7cUPiw4+zL2pPiZvm4tMVYDAdMcFP0HA1qrgiOuMPJA2Z5nKT0uNjGEGhlB3hNHaiHyo+LWPaJoGKk/SY+Q+VL/k6N5M4ObVij78IFOrITaL1bnyJgv/ixy2LQxuOK3xW+3EmOnjNWfMstQkMWkjnTo=
  - secure: gV2sOHm5IidxrBx2Q13HnGYqlEMgo353b9sGuMq5qOeMQ+OGeJ7fnuL6jsBjOgabHDmC8prCloUddmf+aAAk2HTvih/ChGjfmQzKW4TGKslTEPX+dVdg4mELB20A4Cr6FGGVrWBN8KVTCslmbAAgaNxb65tzjOpKjZPPrDy28TCIjUtOPNqM1prS+QT6C1UK5ZkV8CvggLyeaj1sZyitTw1Ypv+ZjA0OuqIjA/AyLl8mk7lKlmfCXzyptgl3xHVYkN9xYM1zQampcFvuW5HPTusFpWTbMORilDjSPQyrjCuS49G/ZYeNvs36UtBrpqd+XmdOmQo3OiNZUZ87pqrVNlHtO6X9/YDez49QCurPbnYmKkBRpab/BMDetUveSZKGEH9XsFYJJNXOxnW1zVKzvhAOSgHtvpn/Zh7IKchKA4Z+Rr1ZUVTtj+4ord95p1q30mnTRqoeFb4y+ti0JPUA0Kvxx8JoH86AT1uq0bI0ZIyIDl7cDA3kRIMCu3mevTd+fJBEvFjpWFg7+4nzufF9XskpZAHXp+ZXWLinVqSi6RHJr+YMLq2HGQoCFHhW0KHX685/b3jcC14ueQCg8VFBpdl5Ly464y0ewA8qAf1tNKl4v1+JpqiXbnhCOY0fceP6Hgu1c0UfJ33IQ96+k7xJu6jg+ZW7YjrMhfEaMNo1AB0=
